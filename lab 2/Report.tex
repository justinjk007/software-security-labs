% Created 2020-02-07 Fri 21:13
% Intended LaTeX compiler: pdflatex
\documentclass[11pt,letterpaper]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\usepackage[letterpaper,margin=1.3in]{geometry}
\usepackage{plex-mono}
\usepackage[sfdefault]{plex-sans}
\linespread{1.5} % Change line spacing
\usepackage{xcolor}
\usepackage{soul}
\usepackage{helvet}
\usepackage{listings}
\usepackage{inconsolata}
\usepackage{xcolor-solarized}
\definecolor{foreground}{RGB}{184, 83, 83} % For verbatim
\definecolor{background}{RGB}{255, 231, 231} % For verbatim
\let\OldTexttt\texttt
\renewcommand{\texttt}[1]{\OldTexttt{\footnotesize\colorbox{background}{\textcolor{foreground}{#1}}}}
\newenvironment{helvetica}{\fontfamily{phv}\selectfont}{\par}
\usepackage{hyperref} % Make the hyper-links prettier
\hypersetup{
colorlinks=true,
linkcolor=blue!70!white,
urlcolor=blue!95!black
}
\usepackage{enumitem}
\setlist[1]{itemsep=5pt}
\lstdefinelanguage{cpp}{
language=C++,
morekeywords={cerr,exit,string},
deletekeywords={...},
escapeinside={\%*}{*)},
showspaces=false,
showstringspaces=false,
showtabs=false,
stepnumber=1,
tabsize=4,
breakatwhitespace=false,
breaklines=true,
backgroundcolor=\color{solarized-base3},
basicstyle=\scriptsize\ttfamily\color{solarized-base0},
commentstyle=\itshape\color{solarized-base01},
keywordstyle=\color{solarized-green},
identifierstyle=\color{solarized-blue},
stringstyle=\color{solarized-cyan},
moredelim = *[l][\color{solarized-orange}]{\#},
moredelim = **[s][\color{solarized-cyan}]{<}{>},
rulecolor=\color{black},
literate={{\%d}}{{\textcolor{solarized-red}{\%d}}}2
{{\%2d}}{{\textcolor{solarized-red}{\%2d}}}3
{{\\n}}{{\textcolor{solarized-red}{\textbackslash{}n}}}2,
}
\author{Justin Kaipada - 100590167}
\date{\today}
\title{LAB 2 - REPORT}
\hypersetup{
 pdfauthor={Justin Kaipada - 100590167},
 pdftitle={LAB 2 - REPORT},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 26.3 (Org mode 9.2.6)}, 
 pdflang={English}}
\begin{document}

\maketitle
\newpage % Go to the next page after title page

{\parindent0pt % disables indentation for all the text between { and }

\section*{Task \#1: Experiencing Capabilities}
\label{sec:org972f51e}

By default ping was a \textbf{Set-UID} program
\lstset{language=cpp,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
justin@justin-Precision-3520 11:22:57 ~
$ ls -l /bin/ping
-rwsr-xr-x 1 root root 64424 Jun 28  2019 /bin/ping
\end{lstlisting}

After changing
\lstset{language=cpp,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
root@justin-Precision-3520:/home/justin# ls -l /bin/ping
-rwxr-xr-x 1 root root 64424 Jun 28  2019 /bin/ping
\end{lstlisting}

Before changing ping
\lstset{language=cpp,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
justin@justin-Precision-3520 11:22:45 ~
$ ping www.google.com
PING www.google.com (172.217.1.4) 56(84) bytes of data.
64 bytes from yyz10s14-in-f4.1e100.net (172.217.1.4): icmp_seq=1 ttl=54 time=9.98 ms
64 bytes from yyz10s14-in-f4.1e100.net (172.217.1.4): icmp_seq=2 ttl=54 time=10.1 ms
64 bytes from yyz10s14-in-f4.1e100.net (172.217.1.4): icmp_seq=3 ttl=54 time=12.8 ms
64 bytes from yyz10s14-in-f4.1e100.net (172.217.1.4): icmp_seq=4 ttl=54 time=7.64 ms
64 bytes from yyz10s14-in-f4.1e100.net (172.217.1.4): icmp_seq=5 ttl=54 time=12.4 ms
^C
--- www.google.com ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4004ms
rtt min/avg/max/mdev = 7.648/10.612/12.819/1.875 ms
\end{lstlisting}

After changing ping to \textbf{non-Set-UID} program
\lstset{language=cpp,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
justin@justin-Precision-3520 11:35:52 ~
$ ping google.com
ping: socket: Operation not permitted
\end{lstlisting}

After giving \texttt{cap\_net\_raw} capability
\lstset{language=sh,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
justin@justin-Precision-3520 11:37:01 ~
$ ping google.com
PING google.com (172.217.1.174) 56(84) bytes of data.
64 bytes from yyz10s04-in-f14.1e100.net (172.217.1.174): icmp_seq=1 ttl=54 time=6.25 ms
64 bytes from yyz10s04-in-f14.1e100.net (172.217.1.174): icmp_seq=2 ttl=54 time=6.04 ms
64 bytes from yyz10s04-in-f14.1e100.net (172.217.1.174): icmp_seq=3 ttl=54 time=6.54 ms
^C
--- google.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2003ms
rtt min/avg/max/mdev = 6.049/6.283/6.546/0.223 ms
\end{lstlisting}

\subsection*{Question 1}
\label{sec:org69af459}

\lstset{language=cpp,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
setcap cap_fowner,cap_chown,cap_dac_override+ep /usr/bin/passwd
\end{lstlisting}

\subsection*{Question 2}
\label{sec:orgd04a8b4}

\subsubsection*{capdacreadsearch}
\label{sec:orgc788dc1}
\subsubsection*{capdacoverride}
\label{sec:org7292456}
\subsubsection*{capchown}
\label{sec:org5dfbd06}
\subsubsection*{capsetuid}
\label{sec:orga680060}
\subsubsection*{capkill}
\label{sec:orgfdd12e9}
\subsubsection*{capnetraw}
\label{sec:org5c48e78}
\section*{Task \#2: Adjusting Privileges}
\label{sec:org9857b46}

After building \texttt{use\_cap} gave it the required capabilities
\lstset{language=sh,label= ,caption= ,captionpos=b,numbers=none}
\begin{lstlisting}
setcap cap_dac_read_search+ep ./use_cap
\end{lstlisting}


}% restore indentation
\end{document}